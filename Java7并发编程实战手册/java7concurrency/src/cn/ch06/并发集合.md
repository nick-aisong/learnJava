并发集合
========

- 使用非阻塞式线程安全列表
- 使用阻塞式线程安全列表
- 使用按优先级排序的阻塞式线程安全列表
- 使用带有延迟元素的线程安全列表
- 使用线程安全可遍历映射
- 生成并发随机数
- 使用原子变量
- 使用原子数组

### 1 简介
数据结构(Data Structure)是编程中的基本元素，几乎每个程序都使用一种或多种数据结构来存储和管理数据。
Java API提供了包含接口、类和算法的Java集合框架(Java Collection Framework)，它实现了可用在程序中的大量数据结构。
当需要在并发程序中使用数据集合时，必须要谨慎地选择相应的实现方式。
大多数集合类不能直接用于并发应用，因为它们没有对本身数据的并发访问进行控制。
如果一些并发任务共享了一个不适用于并发任务的数据结构，将会遇到数据不一致的错误，并将影响程序的准确运行。
这类数据结构的一个例子是ArrayList类。

Java提供了一些可以用于并发程序中的数据集合，它们不会引起任何问题。
一般来说，Java提供了两类适用于并发应用的集合
- 阻塞式集合(Blocking Collection)：这类集合包括添加和移除数据的方法。
当集合已满或为空时，被调用的添加或者移除方法就不能立即被执行，那么调用这个方法的线程将被阻塞，一直到该方法可以被成功执行
- 非阻塞式集合(Non-Blocking Collection):这类集合也包括添加和移除数据的方法。
如果方法不能立即被执行，则返回null或抛出异常，但是调用这个方法的线程不会被阻塞

可以在并发应用中使用一些Java集合
- 非阻塞式列表对应的实现类: ConcurrentLinkedDeque类
- 阻塞式列表对应的实现类: LinkedBlockingDeque类
- 用于数据生成或消费的阻塞式列表对应的实现类: LinkedTransferQueue类
- 按优先级排序列表元素的阻塞式列表对应的实现类: PriorityBlockingQueue类
- 带有延迟列表元素的阻塞式列表对应的实现类: DelayQueue类
- 非阻塞式可遍历映射对应的实现类: ConcurrentSkipListMap类
- 随机数字对应的实现类: ThreadLocalRandom类
- 原子变量对应的实现类: AtomicLong和AtomicIntegerArray类

### 1 使用非阻塞式线程安全列表
最基本的集合类型是列表(List)。
一个列表包含的元素数量不定，可以在任何位置添加、读取或移除元素。
并发列表允许不同的线程在同一时间添加或移除列表中的元素，而不会造成数据不一致。
在本节，将会学到如何在并发程序中使用非阻塞式列表。
非阻塞式列表提供了一些操作，如果被执行的操作不能够立即运行(例如，在列表为空时，从列表取出一个元素)，方法会抛出异常或返回null。
Java 7引入了ConcurrentLinkedDeque类来实现非阻塞式并发列表



