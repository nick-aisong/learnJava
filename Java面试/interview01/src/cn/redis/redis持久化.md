redis持久化
========

Redis持久化有几种类型，他们的区别?

Redis持久化

Redis 提供了2个不同形式的持久化方式
- RDB (Redis Datablase)
- AOF (Append Of File)

➢RDB
- 在指定的时间间隔内将内存中的数据集快照写入磁盘， 也
就是行话讲的Snapshot快照，它恢复时是将快照文件直接
读到内存里

➢备份是如何执行的
- Redis会单独创建 (fork) 一个子进程来进行持久化,会先将数据写入
到一个临时文件中，待持久化过程鄱结束了，再用这个临时文件替换
上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的，
这就确保了极高的性能，如果需要进行大规模数据的恢复，且对于数据
恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加的高效。
RDB的缺点是最后一次持久化后的数据可能丢失

➢RDB的优点
- 节省磁盘空间
- 恢复速度快

➢RDB的缺点
- 虽然Redis在fork时使用了写时拷贝技术,但是如果数据庞大时还是比较消耗性能
- 在备份周期在一定间隔时间做一次备份, 所以如果Redis意外down掉的话，就会丢失最后一次快照后的所有修改

➢AOF
- 以日志的形式来记录每个写操作，将Redis执行过的所
有写指令记录下来(读操作不记录)，只许追加文件但不
可以改写文件，Redis启动之初会读取该文件重新构建
数据，换言之，Redis重启的话就根据日志文件的内容
将写指令从前到后执行一次以完成数据的恢复工作。

➢AOF的优点
- 备份机制更稳健，丢失数据概率更低
- 可读的日志文本，通过操作AOF稳健，可以处理误操作

➢AOF的缺点
- 比起RDB占用更多的磁盘空间
- 恢复备份速度要慢
- 每次读写都同步的话，有一定的性能压力
- 存在个别Bug，造成恢复不能







